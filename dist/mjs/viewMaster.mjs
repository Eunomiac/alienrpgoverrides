/* ▌██░░ alienrpgoverrides v0.3 (2021) ║ MIT License ║ https://github.com/Eunomiac/alienrpgoverrides ░░██▐const RE={get F(){return game.alienrpgoverrides},set F(e){game.alienrpgoverrides=e}},VIEWS={get current(){return canvas.scene._viewPosition},get initial(){return canvas.scene.data.initial},saved:!1,lastScene:!1},setView=({x:e,y:n,scale:s})=>{canvas.stage.pivot.set(e,n),canvas.stage.scale.set(s)};export default{preUpdateScene:e=>{const[n,s]=[canvas.scene,e];return console.log(`[PREUPDATE SCENE] ${n?.name} to ${s?.name}`),n.name!==s.name&&RE.F.scenes[n.name]?.ship===RE.F.scenes[s.name]?.ship?(console.log(`[PREUPDATE SCENE] Saving View: ${JSON.stringify(VIEWS.current)}`),VIEWS.saved=VIEWS.current,game.user.isGM&&RE.F.call("saveView")):(console.log("[PREUPDATE SCENE] Clearing View"),VIEWS.saved=!1),VIEWS.lastScene=n,!0},updateScene:e=>{const[n,s]=[canvas.scene,e];return console.log(`[PREUPDATE SCENE] ${n?.name} to ${s?.name}`),n.name!==s.name&&RE.F.scenes[n.name]?.ship===RE.F.scenes[s.name]?.ship?(VIEWS.saved=VIEWS.current,console.log(`[UPDATE SCENE] Saving View: ${JSON.stringify(VIEWS.saved)}`)):(VIEWS.saved=!1,console.log("[UPDATE SCENE] Clearing View")),VIEWS.lastScene=n,!0},canvasReady:()=>{console.log("[CANVAS READY] Canvas Ready"),VIEWS.saved?(console.log(`[CANVAS READY] Forcing View: ${JSON.stringify(VIEWS.saved)}`),setView(VIEWS.saved)):RE.F.scenes[canvas.scene.name].isResettingViewOnActivate&&(console.log(`[CANVAS READY] Resetting View: ${JSON.stringify(VIEWS.initial)}`),setView(VIEWS.initial))},ARPGO_unlockSceneView:e=>{RE.F.scenes[e].isResettingViewOnActivate=!1},ARPGO_forceView:(e,n,s)=>{/^i/.test(`${e}`)?setView(VIEWS.initial):setView({x:e,y:n,scale:s})},ARPGO_saveView:()=>{console.log(`[SAVEVIEW] Saving View: ${JSON.stringify(VIEWS.current)}`),VIEWS.saved=VIEWS.current}};